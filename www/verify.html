<!--CoinParty - Verify Page
    Template to be displayed when users check their mixings' status

    Copyright (C) 2016 Roman Matzutt, Henrik Ziegeldorf

    This file is part of CoinParty.

    CoinParty is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    CoinParty is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with CoinParty.  If not, see <http://www.gnu.org/licenses/>.-->

<html>
    <head>
        <title>CoinParty Mixing Peer</title>
        <link rel="stylesheet" type="text/css" href="/style/style.css" />
        <script type="text/javascript">
            var time = #cp_time#;
            var phase = #cp_phase#;
            var peer_addresses = #cp_peeraddrs#;
            var session_id = "#cp_sid#";
            var escrow = "#cp_escrow#";
            var value_feeless = "#cp_feeless#";
        </script>
        <script src="/inc/coinparty.js" type="text/javascript"></script>
        <script type="text/javascript">
            window.onload = function() {
                updateRemainingTime(); /* Immediately display remaining time. */
                window.setInterval(updateRemainingTime, 1000);
                var objects = document.getElementById('reports').children[0].children;
                verifySession(objects, peer_addresses, session_id, escrow, value_feeless);
            }
        </script>
    </head>

    <body>
        <div id="head">
            <h1>CoinParty Mixing Peer</h1>

            <p>
                <a href="/">Index</a> | <a href="https://#cp_host#/mp/#cp_id#">Check me on CoinParty.org</a>
            </p>
            <p>
                My ID: <span class="hash">#cp_id#</span>
            </p>
        </div>

        <div class="body">
            <h2>Mixing Operation Verification</h2>

            <p class="text">
                This page provides you an overview of the progress and other
                important data for the mixing operation you are participating in.
            </p>
        </div>
        <div class="body">
            <h3>Operation Progress</h3>

            <p class="text">
                The <span style="font-variant:small-caps"><b>Newish</b></span> phase bar
                serves as an indicator of how far your Bitcoins are from being
                like new in terms of their provided privacy level.
                It shows the mixing phase the mixnet is currently in.
            </p>

            <p class="text">
                In case of an error, you can see the phase the error occurred in
                and whether you have to take action or not.
            </p>

            <div id="phasebar">
                <div><span></span></div><div><span></span></div><div><span></span></div><div><span></span></div><div><span></span></div><div><span></span></div>
            </div>

            <p class="text">#cp_phasestr#</p>
        </div>
        <div class="body">
            <h3>Escrow Details</h3>
            <form>
                <p>
                    <label for="sid">Session ID:</label><input type="input" class="long readable" name="sid" value="#cp_sid#" readOnly /><br />
                    <label for="esc">Escrow address:</label><input type="input" class="readable" name="esc" value="#cp_escrow#" readOnly /><br />
                    <label for="val">Bitcoin value:</label><input type="input" class="readable" name="val" value="#cp_value#" readOnly /><br />
                    <label for="win">Closing earliest:</label><input type="input" class="readable" name="win" id="win" value="#cp_timestr#" readOnly /><br />
                </p>
            </form>
        </div>
        <div class="body">
            <h3>Peer Reports</h3>
            <p class="text">
                The following reports of the other mixing peers verify that I have
                not fooled you.
                If you do not trust me that I forward the reports correctly,
                feel free to contact the mixing peers directly and verify your
                session manually.
            </p>
            <div id="reports">
            #cp_report#
            </div>
        </div>
    </body>
</html>
